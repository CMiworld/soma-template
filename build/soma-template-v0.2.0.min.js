/*
soma-template - v0.2.0 - 2013-06-20
http://soundstep.github.com/soma-template/
http://www.soundstep.com
MIT licence 2013
*/
!function(a){"use strict";function b(a){return"[object Array]"===Object.prototype.toString.apply(a)}function c(a){return"object"==typeof a}function d(a){return"string"==typeof a}function e(a){return a?a.nodeType>0:!1}function f(a){return a&&a.nodeType&&3===a.nodeType}function g(a){return a&&"function"==typeof a}function h(a){return null!==a&&void 0!==a}function i(a){return h(a)?"true"===a||"1"===a||a===!0||1===a?!0:"false"===a||"0"===a||a===!1||0===a||d(a)&&D(a)?!1:!!a:!1}function j(a){return a&&g(a.toString)&&"[object Expression]"===a.toString()}function k(a){return d(a)?!!a.match(mb.func):!1}function l(a){return a&&a.parent&&ub.get(a.element)}function m(a){return a.replace(mb.escape,"\\$&")}function n(a,b){var c=eb.start().replace(/\\/g,""),d="",e=b?a:c;e.length>1&&(d="|\\"+e.substr(0,1)+"(?!\\"+e.substr(1,1)+")[^"+e.substr(0,1)+"]*"),mb.sequence=new RegExp(eb.start()+".+?"+eb.end()+"|[^"+eb.start()+"]+"+d,"g"),mb.token=new RegExp(eb.start()+".*?"+eb.end(),"g"),mb.expression=new RegExp(eb.start()+"|"+eb.end(),"gm")}function o(a){return a.replace(mb.trim,"")}function p(a){return""===a[0]&&a.shift(),""===a[a.length-1]&&a.pop(),a}function q(a){return a.replace(mb.expression,"")}function r(a){return a.replace(mb.depth,"")}function s(a,b){a.parentNode&&a.parentNode.insertBefore(b,a)}function t(a,b){a.parentNode&&a.parentNode.insertBefore(b,a.nextSibling)}function u(a,b){var c;c=document.documentElement.classList?function(a,b){a.classList.remove(b)}:function(a,b){if(!a||!a.className)return!1;var c=new RegExp("(^|\\s)"+b+"(\\s|$)","g");a.className=a.className.replace(c,"$2")},c(a,b)}function v(){function a(){return++d}function b(b){if(b){if("object"!=typeof b)return b;var c;try{c=b.hashkey?b.hashkey:b.hashkey=a()}catch(d){}return c}}var c={},d=1;this.remove=function(a){delete c[b(a)]},this.get=function(a){return c[b(a)]},this.put=function(a,d){c[b(a)]=d},this.has=function(a){return"undefined"!=typeof c[b(a)]},this.getData=function(){return c},this.dispose=function(){for(var a in c)c.hasOwnProperty(a)&&delete c[a];this.length=0}}function w(a,b){var c=a.match(mb.repeat);if(c){var d=c[2],e=new tb(d);return e.getValue(b)}}function x(a,b,c){var d=a.match(mb.repeat);if(d){var e=d[1];b[e]=c}}function y(a,b){var c=a.node||a.attribute.node,d=c.template.watchers,e=c.element;if(!d)return b;var i=d.get(e);!i&&f(c.element)&&c.parent&&(i=d.get(c.parent.element));var j=i?i:d.get(a.pattern);if(g(j)){var k=j(a.value,b,a.pattern,c.scope,c,a.attribute);if(h(k))return k}return b}function z(a){var b=a.split("(")[0];return b=r(b)}function A(a){return console.log("getParamsFromString",a.match(mb.params)),a.match(mb.params)}function B(a){var b=a.split("(")[0],c=b.match(mb.depth);return c?c.length:0}function C(a,b,c){var d=new qb(a,b);d.previousSibling=a.previousSibling,d.nextSibling=a.nextSibling;for(var e,f,g,h=[],j=[],k=a.attributes,l=0,m=k&&k.length;m>l;l++)e=k[l],e.specified&&(f=e.name,g=e.value,f===db.attributes.skip&&(d.skip=i(g)),f===db.attributes.html&&(d.html=i(g)),f!==db.attributes.repeat||c||(d.repeater=g),(D(f+":"+g)||f===db.attributes.repeat||f===db.attributes.skip||f===db.attributes.html||f===db.attributes.show||f===db.attributes.hide||f===db.attributes.href||f===db.attributes.checked||f===db.attributes.disabled||f===db.attributes.multiple||f===db.attributes.readonly||f===db.attributes.selected||-1!==g.indexOf(db.attributes.cloak))&&h.push(new rb(f,g,d)),hb[f]&&!c&&(j.push({name:hb[f],value:g}),h.push(new rb(f,g,d))));d.attributes=h;for(var n=0,o=j.length;o>n;n++)d.addEvent(j[n].name,j[n].value);return d}function D(a){var b=a.match(mb.token);return b&&b.length>0}function E(a){return mb.content.test(a)}function F(a){if(a){var b=a.nodeType;return a&&b?8===b?!1:3!==b||E(a.nodeValue)||D(a.nodeValue)?!0:!1:!1}}function G(a,b,c,d){if(F(b)){var e;if(d?(e=d,e.parent=c):e=C(b,c?c.scope:new pb(cb)._createChild(),c&&(c.repeater||c.isRepeaterDescendant)),c&&(c.repeater||c.isRepeaterDescendant)&&(e.isRepeaterDescendant=!0),e.template=a,!e.skip){for(var f=b.firstChild;f;){var g=G(a,f,e);g&&(g.parent=e,e.children.push(g)),f=f.nextSibling}return e}}}function H(a,b){I(a);for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}function I(a){for(var b in a)a.hasOwnProperty(b)&&"_"!==b.substr(0,1)&&(a[b]=null,delete a[b])}function J(a){if(!a.repeater&&a.children&&!l(a))for(var b=0,c=a.children.length;c>b;b++)a.children[b].update()}function K(a){if(a.children&&!l(a))for(var b=0,c=a.children.length;c>b;b++)a.children[b].render()}function L(a){var c,d=w(a.repeater,a.scope);if(b(d)){for(var e=0,f=d.length,g=a.childrenRepeater.length,h=f>g?f:g;h>e;e++)f>e?c=N(a,e,d[e],gb.index,e,c):(a.parent.element.removeChild(a.childrenRepeater[e].element),a.childrenRepeater[e].dispose());a.childrenRepeater.length>d.length&&(a.childrenRepeater.length=d.length)}else{var i=-1;for(var j in d)d.hasOwnProperty(j)&&(i++,c=N(a,i,d[j],gb.key,j,c));for(var k=i;i++<a.childrenRepeater.length-1;)a.parent.element.removeChild(a.childrenRepeater[i].element),a.childrenRepeater[i].dispose();a.childrenRepeater.length=k+1}a.element.parentNode&&a.element.parentNode.removeChild(a.element)}function M(a,b){var c=new qb(a,b.scope._createChild());if(b.attributes){for(var d=[],e=0,f=b.attributes.length;f>e;e++){if(c.renderAsHtml=b.renderAsHtml,b.attributes[e].name===db.attributes.skip&&(c.skip=i(b.attributes[e].value)),b.attributes[e].name===db.attributes.html&&(c.html=i(b.attributes[e].value)),b.attributes[e].name!==fb.repeat){var g=new rb(b.attributes[e].name,b.attributes[e].value,c);d.push(g)}hb[b.attributes[e].name]&&c.addEvent(hb[b.attributes[e].name],b.attributes[e].value)}c.attributes=d}return c}function N(a,b,c,d,e,f){var g=a.childrenRepeater[b];if(g)return x(a.repeater,g.scope,c),g.scope[d]=e,g.update(),g.render(),g.element;var h=a.element.cloneNode(!0),i=M(h,a);return i.isRepeaterChild=!0,i.parent=a.parent,i.template=a.template,a.childrenRepeater[b]=i,x(a.repeater,i.scope,c),i.scope[d]=e,G(a.template,h,a.parent,i),i.update(),i.render(),f?t(f,h):a.previousSibling?t(a.previousSibling,h):a.nextSibling?s(a.nextSibling,h):a.parent.element.appendChild(h),h}function O(a,b,c){if(a.addEventListener)a.addEventListener(b,c,!1);else{c.$$guid||(c.$$guid=O.guid++),a.events||(a.events={});var d=a.events[b];d||(d=a.events[b]={},a["on"+b]&&(d[0]=a["on"+b])),d[c.$$guid]=c,a["on"+b]=function(a){var b=!0;a=a||Q(((this.ownerDocument||this.document||this).parentWindow||window).event);var c=this.events[a.type];for(var d in c)c.hasOwnProperty(d)&&(this.$$handleEvent=c[d],this.$$handleEvent(a)===!1&&(b=!1));return b}}}function P(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.events&&a.events[b]&&delete a.events[b][c.$$guid]}function Q(a){return a.preventDefault=Q.preventDefault,a.stopPropagation=Q.stopPropagation,a}function R(a,b,c){wb=void 0===c?Number.MAX_VALUE:c,S(a,b,0,!0)}function S(a,b,c,d){if(!e(a))throw new Error("Error in soma.template.parseEvents, only a DOM Element can be parsed.");if(d&&T(a,b),0!==wb)for(var f=a.firstChild;f;)1===f.nodeType&&wb>c&&(S(f,b,++c),T(f,b)),f=f.nextSibling}function T(a,b){for(var c,d,e,f=a.attributes,h=0,i=f&&f.length;i>h;h++)if(c=f[h],c.specified&&(d=c.name,e=c.value,hb[d])){var j=U(b,e);j&&g(j)&&(O(a,hb[d],j),yb.push({element:a,type:hb[d],handler:j}))}}function U(a,b){var c=b.match(mb.func);if(c){var d=c[1];if(g(a[d]))return a[d]}}function V(a){for(var b=yb.length,c=0;--b>=c;){var d=yb[b];(a===d.element||ob(a,d.element))&&(P(d.element,d.type,d.handler),yb.splice(b,1))}}function W(a,b,c){var d=X(b);c(d,d.scope,d.element,d.node)}function X(b,c){var f;if(d(b)){if(!e(c))throw new Error(a.template.errors.TEMPLATE_STRING_NO_ELEMENT);c.innerHTML=b,f=c}else{if(!e(b))throw new Error(a.template.errors.TEMPLATE_NO_PARAM);e(c)?(c.innerHTML=b.innerHTML,f=c):f=b}Y(f)&&(Y(f).dispose(),ub.remove(f));var g=new vb(f);return ub.put(f,g),g}function Y(a){return ub.get(a)}function Z(){var a=ub.getData();for(var b in ub.getData())a.hasOwnProperty(b)&&ub.get(b).render()}function $(a){if(null===a&&(bb={},cb={}),h(a)&&c(a))for(var b in a)a.hasOwnProperty(b)&&(bb[b]=cb[b]=a[b]);return bb}a.template=a.template||{},a.template.version="0.2.0",a.template.errors={TEMPLATE_STRING_NO_ELEMENT:"Error in soma.template, a string template requirement a second parameter: an element target - soma.template.create('string', element)",TEMPLATE_NO_PARAM:"Error in soma.template, a template requires at least 1 parameter - soma.template.create(element)"};var _="{{",ab="}}",bb={},cb={},db=a.template.settings=a.template.settings||{};db.autocreate=!0;var eb=db.tokens={start:function(a){return h(a)&&""!==a&&(_=m(a),n(a,!0)),_},end:function(a){return h(a)&&""!==a&&(ab=m(a),n(a,!1)),ab}},fb=db.attributes={skip:"data-skip",repeat:"data-repeat",src:"data-src",href:"data-href",show:"data-show",hide:"data-hide",cloak:"data-cloak",checked:"data-checked",disabled:"data-disabled",multiple:"data-multiple",readonly:"data-readonly",selected:"data-selected",template:"data-template",html:"data-html"},gb=db.vars={index:"$index",key:"$key"},hb=db.events={};db.eventsPrefix="data-";var ib="click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup focus blur change select selectstart scroll copy cut paste mousewheel keypress error contextmenu input textinput drag dragenter dragleave dragover dragend dragstart dragover drop load submit reset search resize beforepaste beforecut beforecopy";ib+=" touchstart touchend touchmove touchenter touchleave touchcancel gesturestart gesturechange gestureend";for(var jb=ib.split(" "),kb=-1,lb=jb.length;++kb<lb;)hb[db.eventsPrefix+jb[kb]]=jb[kb];var mb={sequence:null,token:null,expression:null,escape:/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,trim:/^[\s+]+|[\s+]+$/g,repeat:/(.*)\s+in\s+(.*)/,func:/(.*?)\((.*)\)/,params:/(\w+\(.*?\)|\w+)/g,quote:/\"|\'/g,content:/[^.|^\s]/gm,depth:/..\//g,string:/^(\"|\')(.*)(\"|\')$/},nb=function(){if("object"!=typeof document)return void 0;for(var a=3,b=!1,c=document.createElement("div");!b;)c.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->",c.getElementsByTagName("i")[0]||(b=!0);return a>4?a:void 0}(),ob="object"!=typeof document?function(){}:document.documentElement.contains?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!!(d&&1===d.nodeType&&c.contains&&c.contains(d))}:document.documentElement.compareDocumentPosition?function(a,b){return b&&!!(16&a.compareDocumentPosition(b))}:function(a,b){for(;b=b.parentNode;)if(b===a)return!0;return!1},pb=function(a){function b(a){var b=c(a);return b._parent=d,d._children.push(b),b}function c(a){var c=a||{};return c._parent=null,c._children=[],c._createChild=function(){return d=c,b.apply(c,arguments)},c}var d;return c(a)},qb=function(a,b){this.element=a,this.scope=b,this.attributes=null,this.value=null,this.interpolation=null,this.invalidate=!1,this.skip=!1,this.repeater=null,this.isRepeaterDescendant=!1,this.isRepeaterChild=!1,this.parent=null,this.children=[],this.childrenRepeater=[],this.previousSibling=null,this.nextSibling=null,this.template=null,this.eventHandlers={},this.html=!1,f(this.element)&&(this.value=this.element.nodeValue,this.interpolation=new sb(this.value,this,void 0))};qb.prototype={toString:function(){return"[object Node]"},dispose:function(){this.clearEvents();var a,b;if(this.children)for(a=0,b=this.children.length;b>a;a++)this.children[a].dispose();if(this.childrenRepeater)for(a=0,b=this.childrenRepeater.length;b>a;a++)this.childrenRepeater[a].dispose();if(this.attributes)for(a=0,b=this.attributes.length;b>a;a++)this.attributes[a].dispose();this.interpolation&&this.interpolation.dispose(),this.element=null,this.scope=null,this.attributes=null,this.attributesHashMap=null,this.value=null,this.interpolation=null,this.repeater=null,this.parent=null,this.children=null,this.childrenRepeater=null,this.previousSibling=null,this.nextSibling=null,this.template=null,this.eventHandlers=null},getNode:function(a){var b;if(a===this.element)return this;if(this.childrenRepeater.length>0){for(var c=0,d=this.childrenRepeater.length;d>c;c++)if(b=this.childrenRepeater[c].getNode(a))return b}else for(var e=0,f=this.children.length;f>e;e++)if(b=this.children[e].getNode(a))return b;return null},getAttribute:function(a){if(this.attributes)for(var b=0,c=this.attributes.length;c>b;b++){var d=this.attributes[b];if(d.interpolationName&&d.interpolationName.value===a)return d}},update:function(){if(!l(this)){if(h(this.interpolation)&&this.interpolation.update(),h(this.attributes))for(var a=0,b=this.attributes.length;b>a;a++)this.attributes[a].update();J(this)}},invalidateData:function(){if(!l(this)){this.invalidate=!0;var a,b;if(this.attributes)for(a=0,b=this.attributes.length;b>a;a++)this.attributes[a].invalidate=!0;for(a=0,b=this.childrenRepeater.length;b>a;a++)this.childrenRepeater[a].invalidateData();for(a=0,b=this.children.length;b>a;a++)this.children[a].invalidateData()}},addEvent:function(a,b){if(!this.repeater){this.eventHandlers[a]&&this.removeEvent(a);var c=this.scope,d=function(a){var d=new tb(b,this.node),e=d.getValue(c,!0),f=d.getValue(c,!1,!0);f.unshift(a),e&&e.apply(null,f)};this.eventHandlers[a]=d,O(this.element,a,d)}},removeEvent:function(a){P(this.element,a,this.eventHandlers[a]),this.eventHandlers[a]=null,delete this.eventHandlers[a]},clearEvents:function(){if(this.eventHandlers)for(var a in this.eventHandlers)this.eventHandlers.hasOwnProperty(a)&&this.removeEvent(a);if(this.children)for(var b=0,c=this.children.length;c>b;b++)this.children[b].clearEvents();if(this.childrenRepeater)for(var d=0,e=this.childrenRepeater.length;e>d;d++)this.childrenRepeater[d].clearEvents()},render:function(){if(!l(this)){if(this.invalidate&&(this.invalidate=!1,f(this.element)&&(this.value=this.parent&&this.parent.html?this.parent.element.innerHTML=this.interpolation.render():this.element.nodeValue=this.interpolation.render())),this.attributes)for(var a=0,b=this.attributes.length;b>a;a++)this.attributes[a].render();this.repeater?L(this):K(this)}}};var rb=function(a,b,c){this.name=a,this.value=b,this.node=c,this.interpolationName=new sb(this.name,null,this),this.interpolationValue=new sb(this.value,null,this),this.invalidate=!1};rb.prototype={toString:function(){return"[object Attribute]"},dispose:function(){this.interpolationName&&this.interpolationName.dispose(),this.interpolationValue&&this.interpolationValue.dispose(),this.interpolationName=null,this.interpolationValue=null,this.node=null,this.name=null,this.value=null,this.previousName=null},update:function(){this.interpolationName.update(),this.interpolationValue.update()},render:function(){function a(a,b){7===nb&&"class"===a?e.className=b:e.setAttribute(a,b)}function b(a,b){i(a)?e.setAttribute(b,b):e.removeAttribute(b)}function c(a){e.setAttribute("src",a)}function d(a){e.setAttribute("href",a)}if(!this.node.repeater){var e=this.node.element;if(this.invalidate&&(this.invalidate=!1,this.previousName=this.name,this.name=h(this.interpolationName.render())?this.interpolationName.render():this.name,this.value=h(this.interpolationValue.render())?this.interpolationValue.render():this.value,this.name===fb.src?c(this.value):this.name===fb.href?d(this.value):((7!==nb||7===nb&&!this.node.isRepeaterChild)&&this.node.element.removeAttribute(this.interpolationName.value),this.previousName&&(7===nb&&"class"===this.previousName?this.node.element.className="":(7!==nb||7===nb&&!this.node.isRepeaterChild)&&this.node.element.removeAttribute(this.previousName)),a(this.name,this.value,this.previousName))),"class"===this.name&&-1!==this.value.indexOf(db.attributes.cloak)&&u(this.node.element,db.attributes.cloak),this.name===fb.hide){var f=i(this.value);a(this.name,f),e.style.display=f?"none":""}if(this.name===fb.show){var f=i(this.value);a(this.name,f),e.style.display=f?"":"none"}if(this.name===fb.checked&&(b(this.value,"checked"),a(this.name,i(this.value)?!0:!1)),this.name===fb.disabled&&(b(this.value,"disabled"),a(this.name,i(this.value)?!0:!1)),this.name===fb.multiple&&(b(this.value,"multiple"),a(this.name,i(this.value)?!0:!1)),this.name===fb.readonly){var f=i(this.value);7===nb?e.readOnly=f?!0:!1:b(this.value,"readonly"),a(this.name,f?!0:!1)}this.name===fb.selected&&(b(this.value,"selected"),a(this.name,i(this.value)?!0:!1))}}};var sb=function(a,b,c){this.value=b&&!f(b.element)?o(a):a,this.node=b,this.attribute=c,this.sequence=[],this.expressions=[];var d=this.value.match(mb.sequence);if(d){for(var e=0,g=d.length;g>e;e++)if(d[e].match(mb.token)){var h=new tb(q(d[e]),this.node,this.attribute);this.sequence.push(h),this.expressions.push(h)}else this.sequence.push(d[e]);p(this.sequence)}};sb.prototype={toString:function(){return"[object Interpolation]"},dispose:function(){if(this.expressions)for(var a=0,b=this.expressions.length;b>a;a++)this.expressions[a].dispose();this.value=null,this.node=null,this.attribute=null,this.sequence=null,this.expressions=null},update:function(){for(var a=-1,b=this.expressions.length;++a<b;)this.expressions[a].update()},render:function(){var a="";if(this.sequence)for(var b=0,c=this.sequence.length;c>b;b++){var d="";d=j(this.sequence[b])?this.sequence[b].value:this.sequence[b],h(d)||(d=""),a+=d}return a}};var tb=function(a,b,c){h(a)&&(this.pattern=a,console.log("PATTERN",this.pattern),this.isString=mb.string.test(a),this.node=b,this.attribute=c,this.value=this.isString?this.pattern:void 0,this.isString?(this.isFunction=!1,this.depth=null,this.path=null,this.params=null):(this.isFunction=k(this.pattern),this.depth=B(this.pattern),this.path=z(this.pattern),console.log("-----------------send string to getParamsFromString",A(this.pattern.match(mb.func)[2])),this.params=this.isFunction?A(this.pattern.match(mb.func)[2]):null,console.log("this.params",this.params)))};tb.prototype={toString:function(){return"[object Expression]"},dispose:function(){this.pattern=null,this.node=null,this.attribute=null,this.path=null,this.params=null,this.value=null},update:function(){var a=this.node;if(!a&&this.attribute&&(a=this.attribute.node),a||!a.scope){var b=this.getValue(a.scope);b=y(this,b),this.value!==b&&(this.value=b,(this.node||this.attribute).invalidate=!0)}},getValue:function(a,b,c){return"zero"}};var ub=new v,vb=function(a){this.watchers=new v,this.node=null,this.scope=null,this.compile(a)};vb.prototype={toString:function(){return"[object Template]"},compile:function(a){a&&(this.element=a),this.node&&this.node.dispose(),this.node=G(this,this.element),this.node.root=!0,this.scope=this.node.scope},update:function(a){h(a)&&H(this.node.scope,a),this.node&&this.node.update()},render:function(a){this.update(a),this.node&&this.node.render()},invalidate:function(){this.node&&this.node.invalidateData()},watch:function(a,b){(d(a)||e(a))&&g(b)&&this.watchers.put(a,b)},unwatch:function(a){this.watchers.remove(a)},clearWatchers:function(){this.watchers.dispose()},clearEvents:function(){this.node.clearEvents()},getNode:function(a){return this.node.getNode(a)},dispose:function(){ub.remove(this.element),this.watchers&&this.watchers.dispose(),this.node&&this.node.dispose(),this.element=null,this.watchers=null,this.node=null}},O.guid=1,Q.preventDefault=function(){this.returnValue=!1},Q.stopPropagation=function(){this.cancelBubble=!0};var wb,xb,yb=[];if("object"==typeof document){var xb=function(){function a(a){for(l=1;a=c.shift();)a()}var b,c=[],d=!1,e=document,f=e.documentElement,g=f.doScroll,h="DOMContentLoaded",i="addEventListener",j="onreadystatechange",k="readyState",l=/^loade|c/.test(e[k]);return e[i]&&e[i](h,b=function(){e.removeEventListener(h,b,d),a()},d),g&&e.attachEvent(j,b=function(){/^c/.test(e[k])&&(e.detachEvent(j,b),a())}),g?function(a){self!=top?l?a():c.push(a):function(){try{f.doScroll("left")}catch(b){return setTimeout(function(){xb(a)},50)}a()}()}:function(a){l?a():c.push(a)}}();if(db.autocreate){var zb=function(b){for(var c=b?b.firstChild:document.body;c;){if(1===c.nodeType){zb(c);var d=c.getAttribute(fb.template);if(d){var e=new Function("return "+d+";");try{var f=e();g(f)&&a.template.bootstrap(d,c,f)}catch(h){}}}c=c.nextSibling}};xb(zb)}}eb.start(_),eb.end(ab),a.plugins=a.plugins||{};var Ab=function(instance,injector){instance.constructor.prototype.createTemplate=function(b,c){if(!b||"function"!=typeof b)throw new Error("Error creating a template, the first parameter must be a function.");if(c&&e(c)){var d=a.template.create(c);for(var f in d)"function"==typeof d[f]&&(b.prototype[f]=d[f].bind(d));b.prototype.render=d.render.bind(d);var g=injector.createChild();return g.mapValue("template",d),g.mapValue("scope",d.scope),g.mapValue("element",d.element),g.createInstance(b)}return null},a.template.bootstrap=function(a,b,c){instance.createTemplate(c,b)}};a.plugins&&a.plugins.add&&a.plugins.add(Ab),a.template.Plugin=Ab,a.template.create=X,a.template.get=Y,a.template.renderAll=Z,a.template.helpers=$,a.template.bootstrap=W,a.template.addEvent=O,a.template.removeEvent=P,a.template.parseEvents=R,a.template.clearEvents=V,a.template.ready=xb,"function"==typeof define&&"undefined"!=typeof define.amd&&define("soma-template",a.template),"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=a.template),"undefined"!=typeof exports&&(exports=a.template)}(this.soma=this.soma||{});