<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!-- Consider adding a manifest.appcache: h5bp.com/d/Offline -->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<title>soma-template by soundstep</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="chrome=1">
	<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
	<link rel="icon" type="image/png" href="favicon.png">
	<link rel="stylesheet" href="assets/gh-buttons/gh-buttons.css">
	<link rel="stylesheet" href="assets/styles/pygment/native.css">
	<link rel="stylesheet" href="assets/styles/styles.css">
	<script src="assets/js/libs/respond.js"></script>
	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<script type="text/javascript">

		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-36294101-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();

	</script>

</head>
<body>

<div class="wrapper">
	<header>
		<h1><a href="./">soma-template</a></h1>

		<p>Seamless DOM-based templates.</p>

		<ul>
			<li><a href="https://github.com/soundstep/soma-template/zipball/master">Download <strong>ZIP File</strong></a></li>
			<li><a href="https://github.com/soundstep/soma-template/tarball/master">Download <strong>TAR Ball</strong></a></li>
			<li><a href="https://github.com/soundstep/soma-template">View On <strong>GitHub</strong></a></li>
		</ul>

	</header>

	<div id="navigation">
		<nav>
			<ul>
				<li><a href="#what-is-soma-template">What is soma-template?</a></li>
				<li><a href="#download">Download</a></li>
				<li><a href="#what-is-a-template">What is a template?</a></li>
				<li><p><a href="#create-a-template-instance">Create a template instance</a></p>
					<ul class="hidden">
						<li><a href="#targeting-a-dom-element">Targeting a dom element</a></li>
						<li><a href="#providing-a-string">Providing a string</a></li>
						<li><a href="#using-a-script-tag">Using a script tag</a></li>
					</ul>
				</li>
				<li><p><a href="#render-a-template">Render a template</a></p>
					<ul class="hidden">
						<li><a href="#simple-rendering">Simple rendering</a></li>
						<li><a href="#json-rendering">JSON rendering</a></li>
					</ul>
				</li>
				<li><p><a href="#interpolation">Interpolation</a></p>
					<ul class="hidden">
						<li><a href="#attributes">Attributes</a></li>
						<li><a href="#anything-anywhere">Anything anywhere</a></li>
						<li><a href="#path-access">Path access</a></li>
						<li><a href="#array-access">Array access</a></li>
						<li><a href="#function-call">Function call</a></li>
						<li><a href="#function-parameters">Function parameters</a></li>
						<li><a href="#mix-everything">Mix everything</a></li>
					</ul>
				</li>
				<li><p><a href="#repeaters">Repeaters</a></p>
					<ul class="hidden">
						<li><a href="#array-repeater">Array repeater</a></li>
						<li><a href="#object-repeater">Object repeater</a></li>
					</ul>
				</li>
				<li><a href="#scope">Scope</a></li>
				<li><p><a href="#special-attributes">Special attributes</a></p>
					<ul class="hidden">
						<li><a href="#data-cloak">data-cloak</a></li>
						<li><a href="#data-skip">data-skip</a></li>
						<li><a href="#data-src">data-src</a></li>
						<li><a href="#data-href">data-href</a></li>
						<li><a href="#data-show-and-data-hide">data-show / data-hide</a></li>
						<li><a href="#data-checked">data-checked</a></li>
						<li><a href="#data-disabled">data-disabled</a></li>
						<li><a href="#data-multiple">data-multiple</a></li>
						<li><a href="#data-readonly">data-readonly</a></li>
					</ul>
				</li>
				<li><p><a href="#helpers">Helpers</a></p>
					<ul class="hidden">
						<li><a href="#add-helpers">Add helpers</a></li>
						<li><a href="#access-helpers">Access helpers</a></li>
						<li><a href="#remove-helpers">Remove helpers</a></li>
					</ul>
				</li>
				<li><p><a href="#watchers">Watchers</a></p>
					<ul class="hidden">
						<li><a href="#watch-a-token">Watch a token</a></li>
						<li><a href="#watch-an-element">Watch an element</a></li>
						<li><a href="#remove-a-watcher">Remove a watcher</a></li>
					</ul>
				</li>
				<li><p><a href="#settings">Settings</a></p>
					<ul class="hidden">
						<li><a href="#tokens">Tokens</a></li>
						<li><a href="#special-attributes-settings">Special attributes</a></li>
						<li><a href="#variables-in-repeaters">Variables in repeaters</a></li>
					</ul>
				</li>
				<li><p><a href="#managing-templates">Managing templates</a></p>
					<ul class="hidden">
						<li><a href="#multiple-templates">Multiple templates</a></li>
						<li><a href="#get-a-template">Get a template</a></li>
						<li><a href="#re-compile">Re-compile</a></li>
						<li><a href="#updating-data">Updating data</a></li>
						<li><a href="#invalidate-data">Invalidate data</a></li>
						<li><a href="#rendering-without-scope">Rendering without scope</a></li>
						<li><a href="#disposing-templates">Disposing templates</a></li>
					</ul>
				</li>
				<li><p><a href="#template-engine-process">Template engine process</a></p>
					<ul class="hidden">
						<li><a href="#compile-time">Compile-time</a></li>
						<li><a href="#render-time">Render-time</a></li>
						<li><a href="#render-a-node">Render a node</a></li>
						<li><a href="#render-an-attribute">Render an attribute</a></li>
					</ul>
				</li>
				<li><a href="#demos">Demos</a></li>
				<li><a href="#tests">Tests</a></li>
				<li><a href="#credits">Credits</a></li>
			</ul>
		</nav>
		<footer>
			<p>
				<a href="https://twitter.com/soundstep" target="_blank">@soundstep</a><br/>
				<a href="http://www.soundstep.com" target="_blank">www.soundstep.com</a>
			</p>

			<p>
				<small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a>
				</small>
			</p>
		</footer>
	</div>

	<section>

		<div class="title">
			<h1>What is soma-template?</h1>
			<a class="anchor" name="what-is-soma-template"></a>
		</div>


		<p>soma-template is a web template engine.</p>
		<p>A web template engine is a solution that is used to process web templates and content to produce an HTML output.</p>
		<p>While this is true for the most common web template engine, soma-template differs about the output process. soma-template will also produce an HTML output, but more precisely, will manipulate DOM nodes rather than producing a "template string" that will be injected into the DOM.</p>
		<p>This results in a workflow that stays close to a normal HTML development as the template can be directly part of the DOM itself.</p>
		<p>The library aims to reduce as much as possible DOM node destruction.</p>
		<p>soma-template is lightweight : 4.7 KB. It is tested and works in all modern browsers and in Internet Explorer from version 7 to 10. Its performance will be directly related to the DOM manipulation performance of the browser itself. This is why today the library is very fast on <a href="https://www.google.com/intl/en/chrome/browser/" target="_blank">Google Chrome</a>, which I recommend.</p>
		<div class="back"><a href="#">top</a></div>

	</section>

	<section>

		<div class="title">
			<h1>Download</h1>
			<a class="anchor" name="download"></a>
		</div>

		<h3>Browser</h3>
		<p><a href="https://github.com/soundstep/soma-template/tree/master/build" class="button icon tag" target="_blank">download soma-template</a></p>
		<p>You can also download a <a href="https://github.com/soundstep/soma-template/zipball/master">zip file</a> containing everything. Finally, add the script to your page:</p>
		<div class="codehilite"><pre><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;soma-template.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span></pre></div>
		<h3>Node.js</h3>
		<div class="codehilite"><pre><span class="nx">$</span> <span class="nx">npm</span> <span class="nx">install</span> <span class="nx">soma</span><span class="o">-</span><span class="nx">template</span></pre></div>
		<div class="codehilite"><pre><span class="kd">var</span> <span class="nx">template</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;soma-template&quot;</span><span class="p">);</span></pre></div>
		<div class="back"><a href="#">top</a></div>

	</section>

	<section>

		<div class="title">
			<h1>What is a template?</h1>
			<a class="anchor" name="what-is-a-template"></a>
		</div>

		<p>A template is a DOM element that contains tokens, and these tokens will be replaced by data provided to the template. Here is an example:</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;template&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;p&gt;</span>My name is <span class="cp">{{</span><span class="nv">name</span><span class="cp">}}</span>.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span></pre></div>
		<p>A token is an identifier surrounded by double curly braces (customizable). In this example "<code>name</code>" is the identifier and the template engine will try to find data to replace the token in the DOM element.</p>
		<div class="back"><a href="#">top</a></div>

	</section>

	<section>

		<div class="title">
			<h1>Create a template instance</h1>
			<a class="anchor" name="create-a-template-instance"></a>
		</div>

		<p>There are three ways to create a template.</p>

		<div class="subtitle">
			<h3>Targeting a dom element</h3>
			<a class="anchor" name="targeting-a-dom-element"></a>
		</div>
		<p>This is the easiest way, and the one I recommend. The template is part of the DOM and a reference to it can be sent to the create function. A template instance will be returned, this is what will be used to render data inside it.</p>
		<p>Note that the tokens will appear in the DOM but the template engine provide a way to easily hide elements (such as the template itself) until the template is rendered. See the class name "<code>data-cloak</code>".</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;&lt;p&gt;</span>My name is <span class="cp">{{</span><span class="nv">name</span><span class="cp">}}</span>.<span class="nt">&lt;/p&gt;&lt;/div&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
  <span class="kd">var</span> <span class="nx">target</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;target&quot;</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">template</span> <span class="o">=</span> <span class="nx">soma</span><span class="p">.</span><span class="nx">template</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">target</span><span class="p">);</span>
<span class="nt">&lt;/script&gt;</span></pre></div>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Providing a string</h3>
			<a class="anchor" name="providing-a-string"></a>
		</div>
		<p>Instead of using an element directly, you can also send a string that represents the template. The template engine will inject the string as a real element inside the DOM, this is why you also need to specify an element target when you use a string template.</p>
		<p>Note that even if you create a template using a string, rendering data inside the template will be done in the same manner: using native DOM manipulation. More specifically, the DOM property <code>innerHTML</code> is never used to render a template in soma-template.</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
  <span class="kd">var</span> <span class="nx">templateString</span> <span class="o">=</span> <span class="s1">&#39;&lt;p&gt;My name is {{name}}.&lt;/p&gt;&#39;<span class="p">;</span>
  <span class="kd">var</span> <span class="nx">target</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;target&quot;</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">template</span> <span class="o">=</span> <span class="nx">soma</span><span class="p">.</span><span class="nx">template</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">templateString</span><span class="p">,</span> <span class="nx">target</span><span class="p">);</span>
<span class="nt">&lt;/script&gt;</span></span></pre></div>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Using a script tag</h3>
			<a class="anchor" name="using-a-script-tag"></a>
		</div>
		<p>This method is similar to other template engines. Elements can be surrounded by script tags and to be injected in the DOM. There is no major advantage using this method as the template will inject it in the DOM as soon as you create the template instance. However this makes you able to compile it at a chosen moment and before that, it will never appear in the DOM.</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;script </span><span class="na">id=</span><span class="s">&quot;source&quot;</span> <span class="na">type=</span><span class="s">&quot;text/x-soma-template&quot;</span><span class="nt">&gt;</span>
  <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="cp">{{</span><span class="nv">name</span><span class="cp">}}</span><span class="o">&lt;/p&gt;</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
  <span class="kd">var</span> <span class="nx">source</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;source&quot;</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">target</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;target&quot;</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">template</span> <span class="o">=</span> <span class="nx">soma</span><span class="p">.</span><span class="nx">template</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">source</span><span class="p">,</span> <span class="nx">target</span><span class="p">);</span>
<span class="nt">&lt;/script&gt;</span></pre></div>
		<div class="back"><a href="#">top</a></div>

	</section>

	<section>

		<div class="title">
			<h1>Render a template</h1>
			<a class="anchor" name="render-a-template"></a>
		</div>

		<p>Rendering a template is the action of sending data inside the template so it can find information to replace the tokens.</p>
		<p>This part will be much different than other template engines. The JSON format can of course still be used, but the way that it is sent to the template is different.</p>
		<p>The template instance is providing a property called <code>scope</code>. There is at least one scope per template, which is nothing more than an object with some special properties for the template engine.</p>
		<p>There can be more than one scope in some cases, see the special attribute <code>data-repeat</code>. The scope is the object that will be used to provide the data. In other words, the data is not sent to the template but assigned to the scope in a very easy and natural manner.</p>
		<p>The template engine will also re-render the elements only if the data has changed.</p>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Simple rendering</h3>
			<a class="anchor" name="simple-rendering"></a>
		</div>
		<p>Here is an example where a value is provided for an identifier named "<code>name</code>" (to keep the code short and simple, a <code>template</code> variable is used to refer to a template instance, see previous examples).</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;&lt;p&gt;</span>My name is <span class="cp">{{</span><span class="nv">name</span><span class="cp">}}</span> and my age is <span class="cp">{{</span><span class="nv">age</span><span class="cp">}}</span>.<span class="nt">&lt;/p&gt;&lt;/div&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;John&quot;</span><span class="p">;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="mi">21</span><span class="p">;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nt">&lt;/script&gt;</span></pre></div>
		<p>This will result in the following:</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;&lt;p&gt;</span>My name is John and my age is 21.<span class="nt">&lt;/p&gt;&lt;/div&gt;</span></pre></div>
		<p><a href="http://plnkr.co/edit/c00Dvm?p=preview"class="button icon edit" target="_blank">try it yourself</a></p>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>JSON rendering</h3>
			<a class="anchor" name="json-rendering"></a>
		</div>
		<p>Another example with data received from an API call. The response can simply be assigned to a scope property and accessed using dot notation.</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;p&gt;</span><span class="cp">{{</span><span class="nv">tweets.results.length</span><span class="cp">}}</span> tweets retrieved
  in <span class="cp">{{</span><span class="nv">tweets.completed_in</span><span class="cp">}}</span> seconds.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
    <span class="nx">type</span><span class="o">:</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span>
	<span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;http://search.twitter.com/search.json?q=template&#39;</span><span class="p">,</span>
	  <span class="nx">dataType</span><span class="o">:</span><span class="s1">&#39;jsonp&#39;</span><span class="p">,</span>
	  <span class="nx">success</span><span class="o">:</span><span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
	    <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">tweets</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
	    <span class="nx">template</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
	  <span class="p">}</span>
  <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span></pre></div>
		<p><a href="http://plnkr.co/edit/kmuiYF?p=preview" class="button icon edit" target="_blank">try it yourself</a></p>
		<div class="back"><a href="#">top</a></div>

	</section>

	<section>

		<div class="title">
			<h1>Interpolation</h1>
			<a class="anchor" name="interpolation"></a>
		</div>

		<p>A String interpolation makes heavy use of string representation of data. It means insert a string or replace a variable with its value making string formatting very intuitive.</p>

		<div class="subtitle">
			<h3>Attributes</h3>
			<a class="anchor" name="attributes"></a>
		</div>
		<p>You can add tokens in text nodes, but you can also use them in attribute names and values. In the following example, a class value is rendered, as well as the attribute name:</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;p</span> <span class="cp">{{</span><span class="nv">name</span><span class="cp">}}</span><span class="na">=&quot;</span><span class="cp">{{</span><span class="nv">value</span><span class="cp">}}</span><span class="na">&quot;</span><span class="nt">&gt;</span>The class used is: <span class="cp">{{</span><span class="nv">value</span><span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;class&quot;</span><span class="p">;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s2">&quot;color&quot;</span><span class="p">;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nt">&lt;/script&gt;</span></pre></div>
		<p><a href="http://plnkr.co/edit/oKtHEr?p=preview" class="button icon edit" target="_blank">try it yourself</a></p>
		<p></p>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Anything anywhere</h3>
			<a class="anchor" name="anything-anywhere"></a>
		</div>
		<p>You can use tokens in anything, but also anywhere, even in the middle of other strings.</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;p</span> <span class="na">cla</span><span class="cp">{{</span><span class="nv">name</span><span class="cp">}}</span><span class="na">=</span><span class="s">&quot;</span><span class="cp">{{</span><span class="nv">value</span><span class="cp">}}</span><span class="s">lor&quot;</span><span class="nt">&gt;</span>
    Ren<span class="cp">{{</span><span class="nv">text1</span><span class="cp">}}</span>er any<span class="cp">{{</span><span class="nv">text2</span><span class="cp">}}</span>ng an<span class="cp">{{</span><span class="nv">text3</span><span class="cp">}}</span>re
  <span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;ss&quot;</span><span class="p">;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s2">&quot;co&quot;</span><span class="p">;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">text1</span> <span class="o">=</span> <span class="s2">&quot;d&quot;</span><span class="p">;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">text2</span> <span class="o">=</span> <span class="s2">&quot;thi&quot;</span><span class="p">;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">text3</span> <span class="o">=</span> <span class="s2">&quot;ywhe&quot;</span><span class="p">;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nt">&lt;/script&gt;</span></pre></div>
		<p><a href="http://plnkr.co/edit/a7lxQc?p=preview" class="button icon edit" target="_blank">try it yourself</a></p>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Path access</h3>
			<a class="anchor" name="path-access"></a>
		</div>
		<p>A path, or dot notation, can be used in the token to access to specific data:</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;p&gt;</span>My name is <span class="cp">{{</span><span class="nv">section.person.name</span><span class="cp">}}</span>
  and my age is <span class="cp">{{</span><span class="nv">section.person.age</span><span class="cp">}}</span>.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
<span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">section</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">person</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span>
    <span class="nx">age</span><span class="o">:</span> <span class="mi">21</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="nx">template</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nt">&lt;/script&gt;</span></pre></div>
		<p><a href="http://plnkr.co/edit/Ofqcxe?p=preview" class="button icon edit" target="_blank">try it yourself</a></p>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Array access</h3>
			<a class="anchor" name="array-access"></a>
		</div>
		<p>The values of an array can be accessed using a standard Javascript syntax:</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;p&gt;</span>two people: <span class="cp">{{</span><span class="nv">person</span><span class="o">[</span><span class="m">0</span><span class="o">][</span><span class="m">0</span><span class="o">]</span><span class="cp">}}</span> + <span class="cp">{{</span><span class="nv">person</span><span class="o">[</span><span class="m">0</span><span class="o">][</span><span class="m">1</span><span class="o">]</span><span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;p&gt;</span>other people: <span class="cp">{{</span><span class="nv">person</span><span class="o">[</span><span class="m">1</span><span class="o">][</span><span class="m">0</span><span class="o">]</span><span class="cp">}}</span> + <span class="cp">{{</span><span class="nv">person</span><span class="o">[</span><span class="m">1</span><span class="o">][</span><span class="m">1</span><span class="o">]</span><span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;p&gt;</span>grouped: <span class="cp">{{</span><span class="nv">getAll</span><span class="o">(</span><span class="nv">person</span><span class="o">)</span><span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">person</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="s1">&#39;john&#39;</span><span class="p">,</span> <span class="s1">&#39;david&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;olivia&#39;</span><span class="p">,</span> <span class="s1">&#39;emily&#39;</span><span class="p">]</span>
  <span class="p">];</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">getAll</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">arr</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nt">&lt;/script&gt;</span></pre></div>
		<p><a href="http://plnkr.co/edit/2KwLul?p=preview" class="button icon edit" target="_blank">try it yourself</a></p>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Function call</h3>
			<a class="anchor" name="function-call"></a>
		</div>
		<p>Functions can also be called from the token, the value returned by the function will replace the token:</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;&lt;p&gt;</span>My name is <span class="cp">{{</span><span class="nv">getName()</span><span class="cp">}}</span>.<span class="nt">&lt;/p&gt;&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">getName</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">&quot;John&quot;</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nt">&lt;/script&gt;</span></pre></div>
		<p><a href="http://plnkr.co/edit/RHD7bK?p=preview" class="button icon edit" target="_blank">try it yourself</a></p>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Function parameters</h3>
			<a class="anchor" name="function-parameters"></a>
		</div>
		<p>Parameters can be sent with a function call. They can be of two types: a string or a reference to another property in the scope:</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;&lt;p&gt;</span>I am <span class="cp">{{</span><span class="nv">getAge</span><span class="o">(</span><span class="s2">&quot;21&quot;</span><span class="o">,</span> <span class="nv">years</span><span class="o">)</span><span class="cp">}}</span>.<span class="nt">&lt;/p&gt;&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">years</span> <span class="o">=</span> <span class="s2">&quot;years old&quot;</span><span class="p">,</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">getAge</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">age</span><span class="p">,</span> <span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">age</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nt">&lt;/script&gt;</span></pre></div>
		<p><a href="http://plnkr.co/edit/umcx9f?p=preview" class="button icon edit" target="_blank">try it yourself</a></p>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Mix everything</h3>
			<a class="anchor" name="mix-everything"></a>
		</div>
		<p>Paths, strings, functions, parameters, text node, attribute names and values, everything can be mixed altogether:</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;bold </span><span class="cp">{{</span><span class="nv">styles.color</span><span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
    I am <span class="cp">{{</span><span class="nv">utils.makeOlder</span><span class="o">(</span><span class="nv">person.age</span><span class="o">,</span> <span class="s2">&quot;years old&quot;</span><span class="o">)</span><span class="cp">}}</span>.
  <span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;script&gt;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">styles</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">color</span><span class="o">:</span> <span class="s2">&quot;color&quot;</span>
  <span class="p">};</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">person</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">age</span><span class="o">:</span> <span class="mi">21</span>
  <span class="p">};</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">utils</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">makeOlder</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">age</span><span class="p">,</span> <span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span><span class="nx">age</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nt">&lt;/script&gt;</span></pre></div>
		<p><a href="http://plnkr.co/edit/ZQbBYn?p=preview" class="button icon edit" target="_blank">try it yourself</a></p>
		<div class="back"><a href="#">top</a></div>

	</section>

	<section>

		<div class="title">
			<h1>Repeaters</h1>
			<a class="anchor" name="repeaters"></a>
		</div>

		<p>A repeater is a special attribute (<code>data-repeat</code>) that will duplicate the current node. A repeater can be used to perform an iteration on an array or an object to display its content.</p>
		<p>The repeater attribute value is composed of three parts: a "current variable" that you can name as your convenience, the keyword "<code>in</code>" and the array or object target: "<code>my_var in my_array</code>".</p>
		<p>A scope will be created for each repeated node to avoid data conflict, and will have a reference to its parent. The template engine will automatically search in its scope parent in case it doesn't find data in its current scope.</p>

		<div class="subtitle">
			<h3>Array repeater</h3>
			<a class="anchor" name="array-repeater"></a>
		</div>
		<p>Here is an example of an array repeater, an <code>$index</code> variable is also available on the current scope and can be passed to a function if needed.</p>
		<p>The node that contains the <code>data-repeat</code>, and everything inside, will be duplicated three times in this example. One for each item in the array <code>items</code>.</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">data-repeat=</span><span class="s">&quot;item in items&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span><span class="cp">{{$index</span><span class="cp">}}</span> - <span class="cp">{{</span><span class="nv">greet</span><span class="cp">}}</span> <span class="cp">{{</span><span class="nv">item.name</span><span class="cp">}}</span>!<span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">greet</span> <span class="o">=</span> <span class="s2">&quot;Hello&quot;</span><span class="p">;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">items</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span> <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;John&quot;</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;David&quot;</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Mike&quot;</span> <span class="p">}</span>
  <span class="p">];</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nt">&lt;/script&gt;</span></pre></div>
		<p><a href="http://plnkr.co/edit/ZQbBYn?p=preview" class="button icon edit" target="_blank">try it yourself</a></p>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Object repeater</h3>
			<a class="anchor" name="object-repeater"></a>
		</div>
		<p>You can also perform an iteration on an object, in this case a <code>$key</code> variable will be available on the current scope.</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">data-repeat=</span><span class="s">&quot;item in items&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span><span class="cp">{{$key}}</span> - <span class="cp">{{</span><span class="nv">greet</span><span class="cp">}}</span> <span class="cp">{{</span><span class="nv">item</span><span class="cp">}}</span>!<span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">greet</span> <span class="o">=</span> <span class="s2">&quot;Hello&quot;</span><span class="p">;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">items</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">name1</span><span class="o">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span>
    <span class="nx">name2</span><span class="o">:</span> <span class="s2">&quot;David&quot;</span><span class="p">,</span>
    <span class="nx">name3</span><span class="o">:</span> <span class="s2">&quot;Mike&quot;</span>
  <span class="p">};</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nt">&lt;/script&gt;</span></pre></div>
		<p><a href="http://plnkr.co/edit/JQtbv6?p=preview" class="button icon edit" target="_blank">try it yourself</a></p>
		<div class="back"><a href="#">top</a></div>

	</section>

	<section>

		<div class="title">
			<h1>Scope</h1>
			<a class="anchor" name="scope"></a>
		</div>

		<p>A scope provides a data model context for a template, and a new scope child is created for each item of a repeater to provide a new context and avoid data conflict.</p>
		<p>The following image illustrates a template scope that contains a child scope, which contains also another child scope, and so on. Notice that all variables names are identical but the values are probably different.</p>
		<p>The global scope that surrounds each template scope is shared between all templates. The global scope can be populated with helper functions or global values (see the helpers section).</p>
		<p><img src="assets/images/scopes.gif" alt="scopes"></p>
		<p><a href="http://plnkr.co/edit/JQtbv6?p=preview" class="button icon edit" target="_blank">try it yourself</a></p>
		<p>Note that a scope parent can also be accessed using a parent path notation (also works with parameters):</p>
		<div class="codehilite"><pre><span class="cp">{{../item.name}}
{{../../getName(../$index)</span><span class="cp">}}</span></pre></div>
		<div class="back"><a href="#">top</a></div>

	</section>

	<section>

		<div class="title">
			<h1>Special attributes</h1>
			<a class="anchor" name="special-attributes"></a>
		</div>

		<p>Special attributes have already been introduced with the repeaters (<code>data-repeat</code>). The attributes are providing new functionalities or special behaviors for ease-of-use most of the time</p>
		<p>All the attribute names are customizable in case you want to change them, it can be useful if one of them are conflicting with something else in your application.</p>

		<div class="subtitle">
			<h3>Hide elements before rendering (data-cloak)</h3>
			<a class="anchor" name="data-cloak"></a>
		</div>
		<p>Paradoxically, <code>data-cloak</code> is not an attribute but a styled class that is used to hide elements before rendering, in other words, to hide tokens. The class itself is not provided by the template but will be automatically removed on rendering.</p>
		<p>The class can be set on the root of the template, or on any element inside the template.</p>
		<div class="codehilite"><pre><span class="nt">&lt;style&gt;</span>
  <span class="nc">.data-cloak</span> <span class="p">{</span>
    <span class="k">display</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
  <span class="p">}</span>
<span class="nt">&lt;/style&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;p&gt;</span>Next line appears after rendering:<span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;data-cloak&quot;</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">text</span><span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="s2">&quot;Here I am!&quot;</span><span class="p">;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nt">&lt;/script&gt;</span></pre></div>
		<p><a href="http://plnkr.co/edit/eetuGW?p=preview" class="button icon edit" target="_blank">try it yourself</a></p>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Skip parsing (data-skip)</h3>
			<a class="anchor" name="data-skip"></a>
		</div>
		<p>The template engine will stop parsing the elements children if it find a <code>data-skip</code> attribute on an element, with no value or a boolean. The value of the attribute can also be a token, only the children will not be parsed. If there are tokens in skipped elements, they won't be replaced.</p>
		<p>It can also be useful to skip a large number of elements to keep the best performance possible.</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;</span>Show my name: <span class="cp">{{</span><span class="nv">name</span><span class="cp">}}</span>, but not
my age: <span class="nt">&lt;span</span> <span class="na">data-skip=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">age</span><span class="cp">}}</span><span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;John&quot;</span><span class="p">;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="mi">21</span><span class="p">;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nt">&lt;/script&gt;</span></pre></div>
		<p><a href="http://plnkr.co/edit/Mn1fc2?p=preview" class="button icon edit" target="_blank">try it yourself</a></p>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Source (data-src)</h3>
			<a class="anchor" name="data-src"></a>
		</div>
		<p>The <code>data-src</code> attribute will produce a <code>src</code> attribute on rendering. The reason for using this attribute is to avoid to give a wrong path to the browser. Using a token in a <code>src</code> attribute, for example the source of an image, would result in a 404 error.</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;&lt;img</span> <span class="na">data-src=</span><span class="s">&quot;images/</span><span class="cp">{{</span><span class="nv">image</span><span class="cp">}}</span><span class="s">.jpg&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">image</span> <span class="o">=</span> <span class="s2">&quot;image&quot;</span><span class="p">;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nt">&lt;/script&gt;</span></pre></div>
		<p><a href="http://plnkr.co/edit/68KEzp?p=preview" class="button icon edit" target="_blank">try it yourself</a></p>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Links (data-href)</h3>
			<a class="anchor" name="data-href"></a>
		</div>
		<p>The <code>data-href</code> attribute will produce a <code>href</code> attribute on rendering. The reason for using this attribute is to avoid the user clicking on a non-rendered links. Using a token in a <code>href</code> attribute, for example an <code>a</code> tag, would probably result in a dead link (404 error).</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">data-href=</span><span class="s">&quot;http://</span><span class="cp">{{</span><span class="nv">link</span><span class="cp">}}</span><span class="s">&quot;</span> <span class="na">target=</span><span class="s">&quot;_blank&quot;</span><span class="nt">&gt;</span>Clickable when rendered<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">link</span> <span class="o">=</span> <span class="s2">&quot;www.soundstep.com&quot;</span><span class="p">;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nt">&lt;/script&gt;</span></pre></div>
		<p><a href="http://plnkr.co/edit/RvwvfM?p=preview" class="button icon edit" target="_blank">try it yourself</a></p>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Show and hide (data-show and data-hide)</h3>
			<a class="anchor" name="data-show-and-data-hide"></a>
		</div>
		<p>While this behavior can be achieved with tokens, this attribute will show or hide elements depending of its value (boolean). It is something close to a switch on and off.</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">data-show=</span><span class="s">&quot;</span><span class="cp">{{</span><span class="nv">displayed</span><span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>I am visible!<span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">data-hide=</span><span class="s">&quot;</span><span class="cp">{{</span><span class="nv">displayed</span><span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>I am not :(<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">displayed</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nt">&lt;/script&gt;</span></pre></div>
		<p><a href="http://plnkr.co/edit/5d9TQL?p=preview" class="button icon edit" target="_blank">try it yourself</a></p>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Checked (data-checked)</h3>
			<a class="anchor" name="data-checked"></a>
		</div>
		<p>A checkbox "initial checked value" is set by the presence or non-presence of the <code>checked</code> attribute. For convenience, the <code>data-checked</code> attribute, which take a boolean, will add or remove the <code>checked</code> attribute.</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">data-checked=</span><span class="s">&quot;</span><span class="cp">{{</span><span class="nv">checked</span><span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span> Checked or unchecked?
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">checked</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nt">&lt;/script&gt;</span></pre></div>
		<p><a href="http://plnkr.co/edit/lEIEOj?p=preview" class="button icon edit" target="_blank">try it yourself</a></p>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Disabled (data-disabled)</h3>
			<a class="anchor" name="data-disabled"></a>
		</div>
		<p>An element <code>disabled</code> value is set by its presence or non-presence. For convenience, the <code>data-disabled</code> attribute, which take a boolean, will add or remove the <code>disabled</code> attribute.</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">data-disabled=</span><span class="s">&quot;</span><span class="cp">{{</span><span class="nv">disabled</span><span class="cp">}}</span><span class="s">&quot;</span> <span class="na">value=</span><span class="s">&quot;Disable me&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nt">&lt;/script&gt;</span></pre></div>
		<p><a href="http://plnkr.co/edit/GLImgm?p=preview" class="button icon edit" target="_blank">try it yourself</a></p>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Multiple (data-multiple)</h3>
			<a class="anchor" name="data-multiple"></a>
		</div>
		<p>A select <code>multiple</code> value is set by its presence or non-presence. For convenience, the <code>data-multiple</code> attribute, which take a boolean, will add or remove the <code>multiple</code> attribute.</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;select</span> <span class="na">data-multiple=</span><span class="s">&quot;</span><span class="cp">{{</span><span class="nv">multiple</span><span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;option&gt;</span>United Kingdom<span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;option&gt;</span>France<span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;option&gt;</span>Germany<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;/select&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">multiple</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nt">&lt;/script&gt;</span></pre></div>
		<p><a href="http://plnkr.co/edit/dbIkSh?p=preview" class="button icon edit" target="_blank">try it yourself</a></p>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Read only (data-readonly)</h3>
			<a class="anchor" name="data-readonly"></a>
		</div>
		<p>An element <code>readonly</code> value is set by its presence or non-presence. For convenience, the <code>data-readonly</code> attribute, which take a boolean, will add or remove the <code>readonly</code> attribute.</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">data-readonly=</span><span class="s">&quot;</span><span class="cp">{{</span><span class="nv">readonly</span><span class="cp">}}</span><span class="s">&quot;</span> <span class="na">value=</span><span class="s">&quot;Read only?&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">readonly</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nt">&lt;/script&gt;</span></pre></div>
		<p><a href="http://plnkr.co/edit/zXtgzx?p=preview" class="button icon edit" target="_blank">try it yourself</a></p>
		<div class="back"><a href="#">top</a></div>

	</section>

	<section>

		<div class="title">
			<h1>Helpers</h1>
			<a class="anchor" name="helpers"></a>
		</div>

		<p>Helper functions (or values) can be added to the template engine to help format the output. The functions will be added to the global scope that is shared between all templates.</p>
		<p>Helper functions make it easy to enhance the template engine's rendering, since they are easily accessible from within the templates. The helpers can be either custom written or imported from other Javascript libraries.</p>

		<div class="subtitle">
			<h3>Add helpers</h3>
			<a class="anchor" name="add-helpers"></a>
		</div>
		<p>The helpers can be added to the template engine, wrapped in an object and passed to the <code>helpers</code> function. In the following example, the template engine is enhanced with a <code>replaceDash</code> custom function and with more than fifty string functions from the library <a href="http://epeli.github.com/underscore.string/" target="_blank">underscore.string</a>.</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;p&gt;</span><span class="cp">{{</span><span class="nv">camelize</span><span class="o">(</span><span class="nv">string1</span><span class="o">)</span><span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;p&gt;</span><span class="cp">{{</span><span class="nv">replaceDash</span><span class="o">(</span><span class="nv">string1</span><span class="o">,</span> <span class="s2">&quot; &quot;</span><span class="o">)</span><span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="nx">soma</span><span class="p">.</span><span class="nx">template</span><span class="p">.</span><span class="nx">helpers</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">str</span><span class="p">.</span><span class="nx">exports</span><span class="p">());</span>
  <span class="nx">soma</span><span class="p">.</span><span class="nx">template</span><span class="p">.</span><span class="nx">helpers</span><span class="p">({</span>
    <span class="nx">replaceDash</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">replacement</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">value</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/-/g</span><span class="p">,</span> <span class="p">replacement</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">});</span>
  <span class="kd">var</span> <span class="nx">template</span> <span class="o">=</span> <span class="nx">soma</span><span class="p">.</span><span class="nx">template</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;target&#39;</span><span class="p">));</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">string1</span> <span class="o">=</span> <span class="s2">&quot;-this-is-a-string-formatted-by-helpers&quot;</span><span class="p">;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nt">&lt;/script&gt;</span></pre></div>
		<p><a href="http://plnkr.co/edit/tYPCz0?p=preview" class="button icon edit" target="_blank">try it yourself</a></p>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Access helpers</h3>
			<a class="anchor" name="access-helpers"></a>
		</div>
		<p>The helpers can be accessed outside of the tokens if needed, either from a call to the helpers function without parameters, or from the global scope.</p>
		<div class="codehilite"><pre><span class="kd">var</span> <span class="nx">camelize</span> <span class="o">=</span> <span class="nx">soma</span><span class="p">.</span><span class="nx">template</span><span class="p">.</span><span class="nx">helpers</span><span class="p">().</span><span class="nx">camelize</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">camelize</span> <span class="o">=</span> <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">_parent</span><span class="p">.</span><span class="nx">camelize</span><span class="p">;</span></pre></div>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Remove helpers</h3>
			<a class="anchor" name="remove-helpers"></a>
		</div>
		<p>For convenience, the helpers can be removed from the template engine, but note that the templates will need to be re-compiled and that it will affect all the templates created.</p>
		<div class="codehilite"><pre><span class="nx">soma</span><span class="p">.</span><span class="nx">template</span><span class="p">.</span><span class="nx">helpers</span><span class="p">(null)<span class="p">;</span></pre></div>
		<div class="back"><a href="#">top</a></div>

	</section>

	<section>

		<div class="title">
			<h1>Watchers</h1>
			<a class="anchor" name="watchers"></a>
		</div>

		<p>To provide flexibility, a specific rendering can be intercepted so you can alter it. They are called watchers, and you can watch either a token or an element.</p>

		<div class="subtitle">
			<h3>Watch a token</h3>
			<a class="anchor" name="watch-a-token"></a>
		</div>

		<p>The following example adds a watcher to the <code>date</code> token. The full string date received as a parameter will be formatted to display only the day, the month and the year.</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;</span>Date formatted: <span class="cp">{{</span><span class="nv">date</span><span class="cp">}}</span><span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">date</span> <span class="o">=</span> <span class="s2">&quot;Wed Nov 14 2012 02:31:20 GMT+0000 (GMT)&quot;</span><span class="p">;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">oldValue</span><span class="p">,</span> <span class="nx">newValue</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">newValue</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\w{3} \d{2} \d{4}/</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
  <span class="p">});</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nt">&lt;/script&gt;</span></pre></div>
		<p><a href="http://plnkr.co/edit/YCEXYb?p=preview" class="button icon edit" target="_blank">try it yourself</a></p>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Watch an element</h3>
			<a class="anchor" name="watch-an-element"></a>
		</div>

		<p>The following example is watching a div element. For convenience, the template engine will not only watch the token <code>{{color}}</code> in the div but will also watch any token that is a text node and a direct child of the element watched: the token <code>{{content}}</code> in this example.</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;</span><span class="cp">{{</span><span class="nv">color</span><span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">content</span><span class="cp">}}</span><span class="nt">&lt;/div&gt;&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="s2">&quot;color-red&quot;</span><span class="p">;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">content</span> <span class="o">=</span> <span class="s2">&quot;This text is not red&quot;</span><span class="p">;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="nx">template</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">oldValue</span><span class="p">,</span> <span class="nx">newValue</span><span class="p">,</span> <span class="nx">pattern</span><span class="p">,</span> <span class="nx">scope</span><span class="p">,</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">attribute</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">attribute</span><span class="p">)</span> <span class="k">return</span> <span class="s2">&quot;color-blue&quot;</span><span class="p">;</span>
    <span class="k">else</span> <span class="k">return</span> <span class="nx">newValue</span> <span class="o">+</span> <span class="s2">&quot; and has been watched as well!&quot;</span><span class="p">;</span>
  <span class="p">});</span>
<span class="nx">template</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nt">&lt;/script&gt;</span></pre></div>
		<p><a href="http://plnkr.co/edit/ipjiWz?p=preview" class="button icon edit" target="_blank">try it yourself</a></p>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Remove a watcher</h3>
			<a class="anchor" name="remove-a-watcher"></a>
		</div>
		<p>To remove a watcher, the <code>unwatch</code> function can be used with either a token or an element. Additionally, the function <code>clearWatchers</code> can be used to remove all the watchers at once.</p>
		<div class="codehilite"><pre><span class="nx">template.unwatch(<span class="s2">&quot;date&quot;</span>);
template.unwatch(element);
template.clearWatchers();</span>
</pre></div>
		<div class="back"><a href="#">top</a></div>

	</section>

	<section>

		<div class="title">
			<h1>Settings</h1>
			<a class="anchor" name="settings"></a>
		</div>

		<p>soma-template exposes some settings to customize variables that might be a problem in some configurations. All the settings are applied on the library in a static way, I recommend changing them before creating templates and the changes will affect all created templates.</p>
		<p>The settings object can be access this way:</p>
		<div class="codehilite"><pre><span class="nx"><span class="kd">var</span> settings = soma.template.settings;</span></pre></div>

		<div class="subtitle">
			<h3>Tokens</h3>
			<a class="anchor" name="tokens"></a>
		</div>
		<p>The default double curly braces that surround an identifier <code>{{name}}</code> can be customized. I recommend using at least 2 characters. Some common characters have been tested, but there might be some problems with weird ones!</p>
		<p>Two methods can be used to get or set the "start token" and the "end token" characters:</p>
		<div class="codehilite"><pre><span class="nx">settings.tokens.start(<span class="s">&quot;[[&quot;</span>);
settings.tokens.end(<span class="s">&quot;]]&quot;</span>);</span>
<span class="nt">&lt;div&gt;</span>[[name]]<span class="nt">&lt;/div&gt;</span></pre></div>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Special attributes</h3>
			<a class="anchor" name="special-attributes-settings"></a>
		</div>
		<p>Here is a list of attributes (and their default values) that can be changed:</p>
		<ul>
			<li>skip (<code>data-skip</code>)
			<li>repeat (<code>data-repeat</code>)
			<li>src (<code>data-src</code>)
			<li>href (<code>data-href</code>)
			<li>show (<code>data-show</code>)
			<li>hide (<code>data-hide</code>)
			<li>cloak (<code>data-cloak</code>)
			<li>checked (<code>data-checked</code>)
			<li>disabled (<code>data-disabled</code>)
			<li>multiple (<code>data-multiple</code>)
			<li>readonly (<code>data-readonly</code>)
			<li>selected (<code>data-selected</code>)
		</ul>
		<p>These values are just a property on an object, they can be changed this way:</p>
		<div class="codehilite"><pre>
<span class="nx">settings</span><span class="p">.</span><span class="nx">attributes</span><span class="p">.</span><span class="nx">repeat</span> <span class="o">=</span> <span class="s2">&quot;custom-repeat&quot;</span><span class="p">;</span>
<span class="nx">settings</span><span class="p">.</span><span class="nx">attributes</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="s2">&quot;custom-src&quot;</span><span class="p">;</span>
</pre></div>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Variables in repeaters</h3>
			<a class="anchor" name="variables-in-repeaters"></a>
		</div>
		<p>The variables used the repeaters (<code>$index</code> and <code>$key</code>) can also be changed:</p>
		<div class="codehilite"><pre><span class="nx">settings</span><span class="p">.</span><span class="nx">vars</span><span class="p">.</span><span class="nx">index</span> <span class="o">=</span> <span class="s2">&quot;_index&quot;</span><span class="p">;</span>
<span class="nx">settings</span><span class="p">.</span><span class="nx">vars</span><span class="p">.</span><span class="nx">key</span> <span class="o">=</span> <span class="s2">&quot;_key&quot;</span><span class="p">;</span></pre></div>
		<div class="back"><a href="#">top</a></div>

	</section>

	<section>

		<div class="title">
			<h1>Managing templates</h1>
			<a class="anchor" name="managing-templates"></a>
		</div>

		<div class="subtitle">
			<h3>Multiple templates</h3>
			<a class="anchor" name="multiple-templates"></a>
		</div>

		<p>Templates can be created side-by-side but also contain each others. The templates can be rendered separately, or all at once using the function <code>soma.template.renderAll()</code>.</p>
		<p>Here is an example of a template containing another template, with the same tokens but different data:</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;template1&quot;</span><span class="nt">&gt;</span>
  My name is <span class="cp">{{</span><span class="nv">name</span><span class="cp">}}</span> and I can count: <span class="cp">{{</span><span class="nv">count</span><span class="cp">}}</span>.
  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;template2&quot;</span><span class="nt">&gt;</span>
    My name is <span class="cp">{{</span><span class="nv">name</span><span class="cp">}}</span> and I can count: <span class="cp">{{</span><span class="nv">count</span><span class="cp">}}</span>.
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="kd">var</span> <span class="nx">tpl1</span> <span class="o">=</span> <span class="nx">soma</span><span class="p">.</span><span class="nx">template</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;template1&#39;</span><span class="p">));</span>
  <span class="nx">tpl1</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;template 1&quot;</span><span class="p">;</span>
  <span class="nx">tpl1</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">tpl2</span> <span class="o">=</span> <span class="nx">soma</span><span class="p">.</span><span class="nx">template</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;template2&#39;</span><span class="p">));</span>
  <span class="nx">tpl2</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;template 2&quot;</span><span class="p">;</span>
  <span class="nx">tpl2</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="nx">tpl1</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
  <span class="nx">tpl2</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
  <span class="c1">// or</span>
  <span class="nx">soma</span><span class="p">.</span><span class="nx">template</span><span class="p">.</span><span class="nx">renderAll</span><span class="p">();</span>
<span class="nt">&lt;/script&gt;</span></pre></div>
		<p><a href="http://plnkr.co/edit/LiAu8K?p=preview" class="button icon edit" target="_blank">try it yourself</a></p>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Get a template from an element</h3>
			<a class="anchor" name="get-a-template"></a>
		</div>

		<p>A reference to a template can be retrieved with the element target of the template, using the function <code>soma.template.get(element)</code>.</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;</span>My name is <span class="cp">{{</span><span class="nv">name</span><span class="cp">}}</span>.<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="kd">var</span> <span class="nx">target</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;target&#39;</span><span class="p">);</span>
  <span class="nx">soma</span><span class="p">.</span><span class="nx">template</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">target</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">template</span> <span class="o">=</span> <span class="nx">soma</span><span class="p">.</span><span class="nx">template</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">target</span><span class="p">);</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;John&quot;</span><span class="p">;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nt">&lt;/script&gt;</span></pre></div>
		<p><a href="http://plnkr.co/edit/fCQ0c8?p=preview" class="button icon edit" target="_blank">try it yourself</a></p>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Re-compile a template</h3>
			<a class="anchor" name="re-compile"></a>
		</div>
		<p>Templates can be re-compiled using the <code>compile</code> function, which is very close to creating a new template, except that you can keep the same template reference.</p>
		<p>Note that re-compiling a template with an element that has been already compiled will not work as the tokens are not in the DOM anymore. To achieve this, a cache of the element can be stored before creating the template.</p>
		<div class="codehilite"><pre><span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">&quot;render&quot;</span><span class="nt">&gt;</span>render<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">&quot;compile&quot;</span><span class="nt">&gt;</span>compile<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;</span>My name is <span class="cp">{{</span><span class="nv">name</span><span class="cp">}}</span>.<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="kd">var</span> <span class="nx">target</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;target&#39;</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">targetCache</span> <span class="o">=</span> <span class="nx">target</span><span class="p">.</span><span class="nx">innerHTML</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">template</span> <span class="o">=</span> <span class="nx">soma</span><span class="p">.</span><span class="nx">template</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">target</span><span class="p">);</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#render&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;John&quot;</span><span class="p">;</span>
    <span class="nx">template</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
  <span class="p">});</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#compile&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">template</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">targetCache</span><span class="p">;</span>
    <span class="nx">template</span><span class="p">.</span><span class="nx">compile</span><span class="p">();</span>
  <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span></pre></div>
		<p><a href="http://plnkr.co/edit/hWoPj3?p=preview" class="button icon edit" target="_blank">try it yourself</a></p>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Updating data without rendering</h3>
			<a class="anchor" name="updating-data"></a>
		</div>
		<p>Updating the data but not rendering the template is possible using the <code>update</code> method.</p>
		<div class="codehilite"><pre><span class="nx">template.scope.name = "John";
template.update();</span>
</pre></div>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Invalidate data</h3>
			<a class="anchor" name="invalidate-data"></a>
		</div>
		<p>The template engine rely on data change to update the nodes and attributes. If the values of the tokens do not change, the DOM will not be updated. The reason is to keep the performance high and change only what is necessary. You can however "invalidate" the data and force a DOM update using the template function "<code>invalidate</code>".</p>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Rendering without scope</h3>
			<a class="anchor" name="rendering-without-scope"></a>
		</div>
		<p><strong>This is not recommended!</strong> Data can be sent straight into the template without using the scope. An object can be sent as a parameter in the <code>update</code> or <code>render</code> functions.</p>
		<p>This method is not recommended because the template engine is meant to work with existing scopes. This will force the template engine to iterate the object and assign the properties to the existing scopes, which will be significantly slower than using the scope. Assigning an object, even a very big object, on an existing scope (<code>scope.big = bigObject</code>) is the right way to use the template engine.</p>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Disposing templates</h3>
			<a class="anchor" name="disposing-templates"></a>
		</div>
		<p>Disposing of something that fill the memory is always a good idea, even a small object. To dispose a template, the <code>dispose</code> function can be called, this will destroy everything that has been created internally by the template engine.</p>
		<div class="codehilite"><pre><span class="nx">template.dispose();
template = null;</span>
</pre></div>
		<div class="back"><a href="#">top</a></div>

	</section>

	<section>

		<div class="title">
			<h1>Template engine process</h1>
			<a class="anchor" name="template-engine-process"></a>
		</div>

		<p>The template engine is going through several steps at compile-time, and render-time</p>

		<div class="subtitle">
			<h3>Compile-time</h3>
			<a class="anchor" name="compile-time"></a>
		</div>
		<p>The compile-time process is what is happening inside the template engine when it is created. The template instance will keep a reference to the element root and start to parse the DOM to create instances of internal functions to mimic and represent the DOM structure of the current template.</p>
		<p>A <code>scope</code> is created on the first node and passed to the others. The internal function instances created are  of the type of <code>Node</code>, <code>Attribute</code>, <code>Interpolation</code> and <code>Expression</code>.</p>
		<p>A <code>Node</code> instance represents a DOM element, an <code>Attribute</code> instance represents an attribute of an element, an <code>Interpolation</code> instance represents a sequence containing strings and expressions, and finally an <code>Expression</code> instance represents a token.</p>
		<p>The template instance keeps and exposes the reference of the root node and the root scope, which are accessible using the template property <code>node</code> and <code>scope</code> respectively.</p>
		<p>A node can contain attributes (or value if it is a Text Node), and can contain other children. Both the nodes and attributes can contain interpolations, and each interpolation can contain a list of expressions (token). In other words, the template instance can be browsed and inspected from the root to its extreme nodes, exposing tokens on the way. The structure has been exposed if some actions have to be made before rendering.</p>
		<p><img src="assets/images/structure.gif" alt="structure"></p>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Render-time</h3>
			<a class="anchor" name="render-time"></a>
		</div>
		<p>The template will start two processes, one after the other. The first step is to update the expressions values using the scope data, invalidating the nodes and attributes if the values have changed. And the second step is parsing its nodes and attributes to update the DOM if necessary.</p>

		<div class="subtitle">
			<h3>Render a node</h3>
			<a class="anchor" name="render-a-node"></a>
		</div>

		<p>All nodes created by the template engine are accessible and it is possible to update and render a single node (and its children), without having to render the whole template.</p>
		<p>For convenience, the template and each node provide a <code>getNode</code> function to quickly access to a specific node if needed. Here is an example to render a specific node without rendering the whole template:</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;p&gt;</span>Only the second paragraph is rendered:<span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;p&gt;</span>First paragraph: <span class="cp">{{</span><span class="nv">content1</span><span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;p</span> <span class="na">id=</span><span class="s">&quot;second&quot;</span><span class="nt">&gt;</span>Second paragraph: <span class="cp">{{</span><span class="nv">content2</span><span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="kd">var</span> <span class="nx">template</span> <span class="o">=</span> <span class="nx">soma</span><span class="p">.</span><span class="nx">template</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;target&#39;</span><span class="p">));</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">content1</span> <span class="o">=</span> <span class="s2">&quot;first content&quot;</span><span class="p">;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">content2</span> <span class="o">=</span> <span class="s2">&quot;second content&quot;</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">node</span> <span class="o">=</span> <span class="nx">template</span><span class="p">.</span><span class="nx">getNode</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;second&#39;</span><span class="p">));</span>
  <span class="nx">node</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>
  <span class="nx">node</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nt">&lt;/script&gt;</span></pre></div>
		<p><a href="http://plnkr.co/edit/IUpUTP?p=preview" class="button icon edit" target="_blank">try it yourself</a></p>
		<p>The nodes can also be accessed this way:</p>
		<div class="codehilite"><pre><span class="nx"><span class="kd">var</span> node = template.node.children[0].children[0];</span></pre></div>
		<div class="back"><a href="#">top</a></div>

		<div class="subtitle">
			<h3>Render an attribute</h3>
			<a class="anchor" name="render-an-attribute"></a>
		</div>
		<p>As the nodes, the attributes can also be accessed and rendered without rendering the whole template.</p>
		<p>For convenience, each node provide a <code>getAttribute</code> function to quickly access to a specific attribute if needed. In the following example, only the class attribute will be rendered:</p>
		<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;</span><span class="cp">{{</span><span class="nv">color</span><span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>Only the class attribute is rendered <span class="cp">{{</span><span class="nv">content</span><span class="cp">}}</span>.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="s2">&quot;color&quot;</span><span class="p">;</span>
  <span class="nx">template</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">content</span> <span class="o">=</span> <span class="s2">&quot;text not rendered&quot;</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">attribute</span> <span class="o">=</span> <span class="nx">template</span><span class="p">.</span><span class="nx">node</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">);</span>
  <span class="nx">attribute</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>
  <span class="nx">attribute</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nt">&lt;/script&gt;</span></pre></div>
		<p><a href="http://plnkr.co/edit/9FwWhy?p=preview" class="button icon edit" target="_blank">try it yourself</a></p>
		<p>The attributes can also be accessed this way:</p>
		<div class="codehilite"><pre><span class="nx"><span class="kd">var</span> attribute = template.node.attributes[0];</span></pre></div>
		<div class="back"><a href="#">top</a></div>

	</section>

	<section>

		<div class="title">
			<h1>Demos</h1>
			<a class="anchor" name="demos"></a>
		</div>

		<p>The <a href="https://github.com/soundstep/soma-template/tree/master/demos" target="_blank">demos source code</a> are available on the github repo.</p>

		<ul>
			<li><a href="demos/twitter/" target="_blank">Twitter search demo</a></li>
			<li><a href="demos/sheet/" target="_blank">Sheet demo</a></li>
		</ul>

		<div class="back"><a href="#">top</a></div>

	</section>

	<section>

		<div class="title">
			<h1>Tests</h1>
			<a class="anchor" name="tests"></a>
		</div>

		<p>soma-template has been tested on all modern browsers and on Internet Explorer from version 7 to 10, but if you find something that doesn't work or want to discussed something, please use <a href="https://github.com/soundstep/soma-template/issues">Github issues</a>.</p>

		<ul>
			<li><a href="tests/" target="_blank">API tests</a></li>
			<li><a href="tests/internal.html" target="_blank">Internal tests</a></li>
		</ul>

		<div class="back"><a href="#">top</a></div>

	</section>

	<section class="last">

		<div class="title">
			<h1>Credits</h1>
			<a class="anchor" name="credits"></a>
		</div>

		<p>I don't have to talk about all these people and great tools that helped me, but not only it is fair, I also think that some details might help other developers to change or improve their workflow if needed. So here it is!</p>

		<p>The library probably wouldn't have been created without the fully featured framework developed by Google: <a href="http://angularjs.org/" target="_blank">AngularJS</a>. While the code itself has nothing to do with AngularJS, the concept has been greatly inspired by its template system and some similarities can be found. The library has been kept to a minimum to do a single job: update the DOM with content.</p>
		<p>The primary goal is to use the native DOM API, with a minimal destruction of the nodes. I also believe, as other developers, that DOM-based template engines are the future and will probably be one day be implemented in the browser itself. Google is probably working on that already as stated in this <a href="http://blog.stevensanderson.com/2012/08/01/rich-javascript-applications-the-seven-frameworks-throne-of-js-2012/" target="_blank">excellent post by Steven Sanderson</a>.</p>
		<p>So, big thanks to the AngularJS team for a great inspiration, at least to me.</p>

		<p>Also, very big thanks to the developers who helped me. <a href="https://twitter.com/mdahlstrand" target="_blank">Magnus Dahlstrand</a> for his invaluable advices, and Arpad Ray for his regular expressions magic!</p>

		<p><a href="http://pivotal.github.com/jasmine/" target="_blank">Jasmine</a> is amazing, it is a behavior-driven development framework to test javascript code. Really easy to work with to run your unit tests.</p>
		<p><a href="http://www.browserstack.com/" target="_blank">Browserstack</a> is a great tool to check your content on different browsers and os. They also have an API to create workers to connect to. I check my Jasmine tests against their API and check visual features in their online tool.</p>
		<p><a href="https://pagekite.net/" target="_blank">pagekite</a> is a great tunneling solution. It basically makes you able to see your local development server from anywhere. I use their services to send the Jasmine tests to Browserstack. Seamless, easy and really working well, great tool.</p>
		<p><a href="http://ryanseddon.github.com/bunyip/" target="_blank">Bunyip</a> is a javascript library that connects everything, so you can run your tests locally. It connects you to the Browserstack API (or local browsers), using pagekite so Browserstack can access to your local server, and internally using <a href="https://github.com/yui/yeti" target="_blank">Yeti</a> (Yahoo) to get the Jasmines tests output back to your command line (yes it does all that).</p>
		<p><a href="http://gruntjs.com/" target="_blank">grunt.js</a> to concatenate scripts, compress Javascript, generate files or do anything with all the plugins that are already built.</p>
		<p><a href="http://vojtajina.github.com/testacular/" target="_blank">Testacular</a> is great to have the Jasmine tests checked at all time while I develop, on files change and in multiple browsers. Hassle free and very easy.</p>
		<p>And along the way, <a href="http://www.jetbrains.com/webstorm/" target="http://www.jetbrains.com/webstorm/" target="_blank">Webstorm</a> is the best javascript editor (imho of course). It is not only makes my like easier but also provides all the tools I need so I can refactor the code and run the tests while staying in the IDE.</p>

		<div class="back"><a href="#">top</a></div>

	</section>



</div>

<script src="assets/js/libs/jquery-1.8.2.min.js"></script>
<script src="assets/js/libs/modernizr.js"></script>
<script src="assets/js/libs/scale.fix.js"></script>
<script src="assets/js/app.js"></script>

</body>
</html>